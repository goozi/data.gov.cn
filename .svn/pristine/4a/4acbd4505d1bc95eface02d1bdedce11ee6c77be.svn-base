package com.dhccity.base.servlet;

import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import org.light.*;
import com.dhccity.base.entity.*;

/**
 * <p>Title: BASE_USER_PARAMETER 表管理Servlet类</p>
 * <p>Description:BASE_USER_PARAMETER</p>
 * <p>Company: dhccity</p>
 * <p>CreateDate: 2007-02-09 16:14</p>
 * @author liuxd
 * @version 1.0
 * <servlet><servlet-name>UserParameterAction</servlet-name><servlet-class>com.dhccity.base.servlet.UserParameterAction</servlet-class></servlet>
   <servlet-mapping><servlet-name>UserParameterAction</servlet-name><url-pattern>/baseUserParameterAction</url-pattern></servlet-mapping>
 */

public class UserParameterAction extends ServletAction
{
	private final String SYSTEM_NAME = "系统维护子系统";
	private final String MODULE_NAME = "用户参数设置";
	private final int WINDOW_TYPE = 1; //0表示无效、1表示调转、2表示关闭

	/**
	 * 参数值设置
	 */
	public void setupValue(HttpRequest request, HttpServletResponse response, User user) throws ServletException, IOException
	{
		BaseUserParameter baseUserParameter = null;

		String pageSize = request.getString("pageSize");
		baseUserParameter = new BaseUserParameter().findByUserId(user.getId(), "PAGE_SIZE");
		if (baseUserParameter != null)
		{
			baseUserParameter.setValue(pageSize);
			baseUserParameter.update();
		}
		else
		{
			baseUserParameter = new BaseUserParameter();
			baseUserParameter.setUserId(user.getId());
			baseUserParameter.setCode("PAGE_SIZE");
			baseUserParameter.setValue(pageSize);
			baseUserParameter.add();
		}

		user.addLog(SYSTEM_NAME, MODULE_NAME, "参数设置");
		doReturn(response, WINDOW_TYPE, "userParameter_setup.jsp");
	}

}
